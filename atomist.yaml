#
#  Copyright Â© 2020 Atomist, Inc.
#
#  Licensed under the Apache License, Version 2.0 (the "License");
#  you may not use this file except in compliance with the License.
#  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.
#
 
skill:
  name: '@atomist/container-runner-skill'
  title: Docker Container Runner
  version: 0.1.0
  author: Atomist
  description: Atomist Skill to run Docker containers on pushes to Git repositories
  category:
    - ci
  technology:
    - docker
  license: Apache-2.0
  homepage: https://github.com/atomist-skills/container-skill
  repository: https://github.com/atomist-skills/container-skill.git
  icon: https://www.docker.com/sites/default/files/social/docker_facebook_share.png

  package:
    - use: '@atomist/package-sdm-skill/package'

configuration:
  sdm:
    cache:
      enabled: true
      path: /tmp/sdm

goals:
  - name: run
    containers:
      - name: ${parameters.name:run}
        image: ${parameters.image}
        command: ${!parameters.command}
        args: ${!parameters.args}
        env: ${!parameters.env}
        resources:
          limits:
            cpu: 1000m
            memory: 2048Mi
          requests:
            cpu: 100m
            memory: 1024Mi
    retry: true
